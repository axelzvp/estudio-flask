<!DOCTYPE html>

<html lang="es">

<head>

    <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>MULTIESTUDIO - Modo Examen</title>

    

    <!-- MathJax -->

    <script>

        window.MathJax = {

            tex: {

                inlineMath: [['$', '$'], ['\$$', '\$$']],

                displayMath: [['$$', '$$'], ['\\[', '\\]']],

                processEscapes: true

            },

            options: {

                skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre']

            }

        };

    </script>

    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>

    

    <!-- Font Awesome -->

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    

    <!-- Google Fonts -->

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">



    <link rel="stylesheet" href="{{ url_for('static', filename='css/index.css') }}">



    

</head>

<body>

    <!-- Header principal -->

    <header class="main-header">

        <div class="logo-container">

            <div class="logo-icon">

                <i class="fas fa-brain"></i>

            </div>

            <div class="logo-text">

                <h1>MULTIESTUDIO</h1>

            </div>

        </div>

        <div class="header-actions">
            <button class="user-menu-btn" id="viewSimulatorResultsBtn" title="Ver resultados" style="display: none;">
                <i class="fas fa-table"></i>
                <span>Resultados</span>
            </button>
            <div class="user-menu" id="userMenu">
                <button class="user-menu-btn" id="userMenuBtn" title="Cuenta">
                    <i class="fas fa-user-circle"></i>
                    <span id="userMenuName">Usuario</span>
                </button>
                <div class="user-menu-dropdown" id="userMenuDropdown">
                    <button class="user-menu-item" id="logoutBtn">
                        <i class="fas fa-sign-out-alt"></i> Cerrar sesión
                    </button>
                </div>
            </div>
        </div>
    </header>



    <!-- Contenedor principal -->

    <main class="main-container">

        <!-- Selector de modo -->

        <div class="mode-selector">

            <button class="mode-btn active" id="studyModeBtn">

                <i class="fas fa-graduation-cap"></i>

                <span>Modo Estudio</span>

                <small>Preguntas individuales</small>

            </button>

            <button class="mode-btn" id="examModeBtn">
                <i class="fas fa-file-alt"></i>
                <span>Modo Examen</span>
                <small>Examen cronometrado</small>
            </button>
            <button class="mode-btn" id="simulatorModeBtn">
                <i class="fas fa-clipboard-check"></i>
                <span>Simuladores</span>
                <small>Examen fijo</small>
            </button>
        </div>
        

        <!-- ConfiguraciÃ³n de examen (oculta por defecto) -->

        <section class="exam-config-section" id="examConfigSection">

            <div class="section-title">

                <i class="fas fa-cog"></i>

                <h2>Configuracion del Examen</h2>

            </div>

            

            <div class="config-grid">
                <div class="config-item">
                    <label for="examQuestionCount">

                        <i class="fas fa-list-ol"></i> Numero de preguntas

                    </label>

                    <select id="examQuestionCount">

                        <option value="5">5 preguntas</option>

                        <option value="10" selected>10 preguntas</option>

                        <option value="15">15 preguntas</option>

                        <option value="20">20 preguntas</option>

                        <option value="25">25 preguntas</option>

                        <option value="30">30 preguntas</option>

                    </select>

                </div>

                

                <div class="config-item">

                    <label for="examTimeLimit">

                        <i class="fas fa-clock"></i> Tiempo li­mite (minutos)

                    </label>

                    <select id="examTimeLimit">

                        <option value="0">Sin li­mite</option>

                        <option value="5">5 minutos</option>

                        <option value="10">10 minutos</option>

                        <option value="15">15 minutos</option>

                        <option value="20">20 minutos</option>

                        <option value="30" selected>30 minutos</option>

                        <option value="45">45 minutos</option>

                        <option value="60">60 minutos</option>

                    </select>

                </div>

                

                <div class="config-item">
                    <label>
                        <i class="fas fa-book"></i> Materias
                    </label>
                    <div class="exam-subject-controls">
                        <button type="button" class="btn btn-outline btn-sm" id="selectAllSubjectsBtn">Todas</button>
                        <button type="button" class="btn btn-outline btn-sm" id="clearSubjectsBtn">Limpiar</button>
                    </div>
                    <div class="exam-subjects-list" id="examSubjectList">
                        <!-- Las materias se cargarÃ¡n dinÃ¡micamente -->
                    </div>
                </div>
                

            </div>

            

            <div class="action-container">

                <button class="action-btn start-exam-btn" id="startExamBtn">

                    <i class="fas fa-play-circle"></i>

                    <span>Comenzar Examen</span>

                </button>

            </div>

        </section>

        

        <!-- Selector de simuladores -->
        <section class="simulator-section" id="simulatorSection" style="display: none;">
            <div class="section-title">
                <i class="fas fa-clipboard-check"></i>
                <h2>Simuladores</h2>
            </div>
            
            <div class="simulator-grid" id="simulatorList">
                <!-- Simuladores se cargan dinÃÂ¡micamente -->
            </div>
        </section>

        <!-- Selector de materias (Modo Estudio) -->
        <section class="study-selector" id="studySelectorSection">
            <div class="section-title">

                <i class="fas fa-book"></i>

                <h2>Selecciona una materia</h2>

            </div>

            

            <div class="subjects-grid" id="subjectButtons">

                <!-- Las materias se cargan dinÃ¡micamente -->

            </div>

            

            <!-- Temas -->

            <div id="topicSelectorContainer" class="topics-section">

                <div class="topics-header">

                    <div>

                        <h3>Temas de <span id="currentSubjectName" style="color: var(--primary); font-weight: 600;"></span></h3>

                        <p class="topics-subtitle">Filtra por temas especi­ficos (opcional)</p>

                    </div>

                    <i class="fas fa-filter" style="color: var(--primary); font-size: 1rem;"></i>

                </div>

                <div class="topics-grid" id="studyTopicButtons">

                    <!-- Los temas se cargan aquÃ­ -->

                </div>

            </div>

            

            <!-- BotÃ³n para comenzar -->

            <div class="action-container">

                <button class="action-btn" id="getQuestionBtn">

                    <i class="fas fa-play-circle"></i>

                    <span>Obtener Pregunta</span>

                </button>

            </div>

        </section>

    </main>

    

    <!-- Modal de examen activo -->

    <div class="exam-active-modal" id="examActiveModal">

        <div class="exam-header">

            <div class="exam-info">
                <div class="exam-simulator-name" id="examSimulatorName"></div>
                <span id="examProgressText">Pregunta 0/0</span>
                <span class="exam-header-subject" id="examHeaderSubject"></span>

                <div class="exam-timer" id="examTimer">

                    <i class="fas fa-clock"></i>

                    <span id="timerDisplay">00:00</span>

                </div>

                <div class="exam-progress">

                    <div class="progress-bar">

                        <div class="progress-fill" id="examProgressFill" style="width: 0%"></div>

                    </div>

                </div>

            </div>

            <button class="nav-btn" id="finishExamBtn" style="background: var(--danger); color: white;">

                <i class="fas fa-flag-checkered"></i> Terminar Examen

            </button>

        </div>

        

        <div class="exam-body">

            <div class="exam-question-container" id="examQuestionContainer">

                <!-- Las preguntas del examen se cargarÃ¡n aquÃ­ -->

            </div>

        </div>

        

        <div class="exam-footer">

            <div class="exam-nav-buttons">

                <button class="nav-btn" id="prevQuestionBtn" disabled>

                    <i class="fas fa-chevron-left"></i> Anterior

                </button>

                <button class="nav-btn" id="nextQuestionBtn">

                    Siguiente <i class="fas fa-chevron-right"></i>

                </button>

            </div>

          

        </div>

    </div>

    

    <!-- Modal de resultados del examen -->

    <div class="exam-results-modal" id="examResultsModal">

        <div class="results-card">

            <div class="results-header">

                <h2><i class="fas fa-trophy"></i> Resultados del Examen</h2>

                <div class="results-score" id="examCorrectBox">0/0</div>

                <div id="examTimeUsed">Tiempo utilizado: 00:00</div>

            </div>

            

            <div class="results-body">

                <div class="results-stats" id="examStats">

                    <!-- EstadÃ­sticas se cargarÃ¡n aquÃ­ -->

                </div>

                

                <h3>Revision de preguntas</h3>

                <div class="results-questions" id="examReviewQuestions">

                    <!-- Preguntas revisadas se cargarán aquí -->
                </div>

            </div>

            

            <div class="results-footer">

                <button class="nav-btn" onclick="restartExam()">

                    <i class="fas fa-redo"></i> Intentar otro examen

                </button>

                <button class="nav-btn primary" onclick="closeResults()">

                    <i class="fas fa-home"></i> Volver al inicio

                </button>

            </div>

        </div>

    </div>

    <div class="exam-results-modal" id="simulatorResultsModal">
        <div class="results-card">
            <div class="results-header simulator-results-header">
                <button class="results-close-btn" type="button" onclick="closeSimulatorResults()" aria-label="Cerrar">
                    &times;
                </button>
                <h3 id="simulatorResultsTitle">Simulador</h3>
                <div class="results-grade" id="simulatorResultsSubtitle">Ranking de alumnos</div>
            </div>
            <div class="results-body">
                <div id="simulatorResultsTableWrap"></div>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="simulatorModeChoiceModal">
        <div class="study-modal simulator-mode-choice-modal">
            <div class="modal-header">
                <div class="simulator-mode-choice-title-wrap">
                    <h3 id="simulatorModeChoiceTitle" class="simulator-mode-choice-title">Simulador</h3>
                </div>
                <button class="modal-close" type="button" onclick="closeSimulatorModeChoice()">&times;</button>
            </div>
            <div class="modal-body simulator-mode-choice-body">
                <p>Elige cómo quieres abrir este simulador.</p>
                <p class="simulator-mode-hint" id="simulatorModeRuleHint"></p>
                <div class="simulator-mode-choice-actions">
                    <button class="action-btn simulator-exam-mode-btn" id="startSimulatorExamModeBtn" type="button">
                        <i class="fas fa-stopwatch"></i>
                        <span>Modo examen</span>
                    </button>
                    <button class="action-btn" id="startSimulatorStudyModeBtn" type="button">
                        <i class="fas fa-book-open"></i>
                        <span>Modo estudio</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    

    <!-- MODAL DE PREGUNTA (Modo Estudio) -->

    <div class="modal-overlay" id="studyQuestionModal">

        <div class="study-modal">

            <div class="modal-header">

                <div class="question-badges">

                    <span class="badge badge-subject" id="modalQuestionSubject">

                        <i class="fas fa-book"></i> <span id="subjectText"></span>

                    </span>

                    <span class="badge badge-topic" id="modalQuestionTopic">

                        <i class="fas fa-tag"></i> <span id="topicText"></span>

                    </span>

                    <span class="badge badge-university" id="modalQuestionUniversity">

                        <i class="fas fa-university"></i> <span id="universityText"></span>

                    </span>

                </div>

                <button class="modal-close" onclick="closeStudyModal()">&times;</button>

            </div>

        

            <div class="modal-body">

                <div class="question-content" id="modalQuestionText"></div>

        

                <!-- Opciones -->

                <div class="options-container" id="modalOptionsContainer"></div>

        

                <!-- Respuesta -->

                <div class="answer-section" id="modalAnswerSection">

                    <div class="answer-title">

                        <i class="fas fa-check-circle"></i> Respuesta Correcta

                    </div>

                    <div class="answer-content" id="modalAnswerText"></div>

                    

                    <div class="solution-box" id="solutionContainer" style="display: none;">

                        <div class="solution-title">

                            <i class="fas fa-list-ol"></i> Solucion Detallada

                        </div>

                        <div class="solution-content" id="modalSolutionText"></div>

                    </div>

                </div>

            </div>

        

            <div class="modal-footer">

                <button class="modal-btn modal-btn-outline" onclick="showModalAnswer()">

                    <i class="fas fa-eye"></i> Ver respuesta

                </button>

                <button class="modal-btn modal-btn-primary" onclick="getRandomQuestion()">

                    <i class="fas fa-redo"></i> Siguiente pregunta

                </button>

            </div>

        </div>

    </div>


    <script src="{{ url_for('static', filename='js/index.js') }}"></script>

</body>

</html>
